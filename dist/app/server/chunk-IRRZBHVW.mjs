import './polyfills.server.mjs';
import{a as R}from"./chunk-KAXRN4ZG.mjs";import{A as L,D as I,f as N,g as k,h as O,m as $,n as B}from"./chunk-5672UTFT.mjs";import{$a as M,Ha as _,K as E,Ma as f,Oa as l,P as T,Pa as C,Qa as r,Ra as i,Sa as m,Ta as P,Ua as x,V as u,Va as s,Y as z,Za as c,_a as g,ab as v,bb as D,ca as b,cb as A,da as h,db as V,ua as j,vb as F,xa as a,ya as y}from"./chunk-6OJQON2Z.mjs";import"./chunk-VVCT4QZE.mjs";var U=(()=>{class t{transform(e){return e==null?"-":new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275pipe=z({name:"currencyArs",type:t,pure:!0,standalone:!0})}}return t})();var K=t=>["/productos",t];function Q(t,d){if(t&1&&m(0,"img",16),t&2){let e=s();l("src",e.mainImage,j)("alt",e.product.name)}}function W(t,d){if(t&1&&(r(0,"div",17)(1,"span"),c(2),i()()),t&2){let e=s();a(2),g(e.product.name[0])}}function X(t,d){t&1&&(r(0,"span",18),c(1,"Sin stock"),i())}function Z(t,d){if(t&1&&(r(0,"span",19),c(1),i()),t&2){let e=s();a(),M(" ",e.variant.units_per_pack,"u/pack ")}}function tt(t,d){if(t&1&&(r(0,"span",20),c(1),i()),t&2){let e=s();a(),g(e.variant.sku)}}var Y=(()=>{class t{constructor(e){this.cart=e,this.added=!1}get mainImage(){return this.product.images?.[0]?.url??""}get variant(){return this.product.variants?.[0]??null}get inStock(){return(this.variant?.stock??0)>0}get price(){return this.variant?.price_ars??0}addToCart(e){e.preventDefault(),e.stopPropagation(),!(!this.variant||!this.inStock)&&(this.cart.add({variantId:this.variant.id,productId:this.product.id,productName:this.product.name,slug:this.product.slug,sku:this.variant.sku,price_ars:this.variant.price_ars,quantity:1,imageUrl:this.mainImage,stock:this.variant.stock,units_per_pack:this.variant.units_per_pack}),this.added=!0,setTimeout(()=>this.added=!1,1800))}static{this.\u0275fac=function(o){return new(o||t)(y(R))}}static{this.\u0275cmp=u({type:t,selectors:[["app-product-card"]],inputs:{product:"product"},standalone:!0,features:[v],decls:22,vars:16,consts:[[1,"product-card",3,"routerLink"],[1,"card-image"],["loading","lazy",3,"src","alt",4,"ngIf"],["class","card-image-placeholder",4,"ngIf"],["class","card-badge out-of-stock",4,"ngIf"],["class","card-badge in-stock",4,"ngIf"],[1,"card-body"],[1,"card-meta"],["class","card-sku",4,"ngIf"],[1,"card-name"],[1,"card-description"],[1,"card-footer"],[1,"card-price"],[1,"card-btn",3,"click","disabled"],[1,"btn-text-default"],[1,"btn-text-added"],["loading","lazy",3,"src","alt"],[1,"card-image-placeholder"],[1,"card-badge","out-of-stock"],[1,"card-badge","in-stock"],[1,"card-sku"]],template:function(o,n){o&1&&(r(0,"article",0)(1,"div",1),f(2,Q,1,2,"img",2)(3,W,3,1,"div",3)(4,X,2,0,"span",4)(5,Z,2,1,"span",5),i(),r(6,"div",6)(7,"div",7),f(8,tt,2,1,"span",8),i(),r(9,"h3",9),c(10),i(),r(11,"p",10),c(12),i(),r(13,"div",11)(14,"span",12),c(15),A(16,"currencyArs"),i(),r(17,"button",13),x("click",function(w){return n.addToCart(w)}),r(18,"span",14),c(19,"+ Carrito"),i(),r(20,"span",15),c(21,"\u2713 Agregado"),i()()()()()),o&2&&(l("routerLink",D(14,K,n.product.slug)),a(2),l("ngIf",n.mainImage),a(),l("ngIf",!n.mainImage),a(),l("ngIf",!n.inStock),a(),l("ngIf",n.inStock&&n.variant),a(3),l("ngIf",n.variant),a(2),g(n.product.name),a(2),g(n.product.description),a(3),g(V(16,12,n.price)),a(2),C("added",n.added),l("disabled",!n.inStock))},dependencies:[O,k,I,L,U],styles:[".product-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:var(--color-bg);cursor:pointer;text-decoration:none;color:inherit;transition:transform .25s ease;position:relative;overflow:hidden}.product-card[_ngcontent-%COMP%]:hover{z-index:2;transform:scale(1.01)}.product-card[_ngcontent-%COMP%]:hover   .card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.04)}.card-image[_ngcontent-%COMP%]{position:relative;aspect-ratio:1 / 1;background:var(--color-surface);overflow:hidden}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .5s ease;display:block}.card-image-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-family:var(--font-display);font-size:64px;font-weight:800;color:var(--color-border);text-transform:uppercase}.card-badge[_ngcontent-%COMP%]{position:absolute;top:12px;left:12px;font-family:var(--font-mono);font-size:10px;letter-spacing:.12em;text-transform:uppercase;padding:4px 10px;border-radius:2px}.card-badge.in-stock[_ngcontent-%COMP%]{background:var(--color-accent);color:var(--color-bg)}.card-badge.out-of-stock[_ngcontent-%COMP%]{background:var(--color-text-muted);color:var(--color-bg)}.card-body[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;flex:1;gap:6px}.card-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.card-sku[_ngcontent-%COMP%]{font-family:var(--font-mono);font-size:10px;letter-spacing:.1em;text-transform:uppercase;color:var(--color-text-muted)}.card-name[_ngcontent-%COMP%]{font-family:var(--font-display);font-size:22px;font-weight:700;color:var(--color-text);margin:0;line-height:1.1;letter-spacing:-.02em}.card-description[_ngcontent-%COMP%]{font-family:var(--font-body);font-size:13px;color:var(--color-text-muted);margin:0;line-height:1.5;flex:1}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:12px;padding-top:16px;border-top:1px solid var(--color-border)}.card-price[_ngcontent-%COMP%]{font-family:var(--font-display);font-size:20px;font-weight:700;color:var(--color-text);letter-spacing:-.02em}.card-btn[_ngcontent-%COMP%]{position:relative;overflow:hidden;font-family:var(--font-mono);font-size:11px;letter-spacing:.1em;text-transform:uppercase;padding:8px 16px;background:var(--color-text);color:var(--color-bg);border:none;border-radius:2px;cursor:pointer;transition:background .2s ease}.card-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-accent)}.card-btn[_ngcontent-%COMP%]:disabled{background:var(--color-border);color:var(--color-text-muted);cursor:not-allowed}.btn-text-default[_ngcontent-%COMP%], .btn-text-added[_ngcontent-%COMP%]{display:block;transition:transform .25s ease,opacity .25s ease}.btn-text-added[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;transform:translateY(100%);opacity:0}.card-btn.added[_ngcontent-%COMP%]{background:var(--color-success)}.card-btn.added[_ngcontent-%COMP%]   .btn-text-default[_ngcontent-%COMP%]{transform:translateY(-100%);opacity:0}.card-btn.added[_ngcontent-%COMP%]   .btn-text-added[_ngcontent-%COMP%]{transform:translateY(0);opacity:1}"]})}}return t})();var q=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-loading-spinner"]],standalone:!0,features:[v],decls:4,vars:0,consts:[[1,"spinner-wrap"],[1,"spinner"],[1,"spinner-label"]],template:function(o,n){o&1&&(r(0,"div",0),m(1,"div",1),r(2,"span",2),c(3,"Cargando"),i()())},styles:[".spinner-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px}.spinner[_ngcontent-%COMP%]{width:36px;height:36px;border:2px solid var(--color-border);border-top-color:var(--color-accent);border-radius:50%;animation:_ngcontent-%COMP%_spin .7s linear infinite}.spinner-label[_ngcontent-%COMP%]{font-family:var(--font-mono);font-size:11px;letter-spacing:.2em;text-transform:uppercase;color:var(--color-text-muted)}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})}}return t})();var H={production:!0,apiUrl:"https://backend.integralesproveedores.workers.dev"};var G=(()=>{class t{constructor(e){this.http=e,this.base=H.apiUrl}get(e,o){let n=new $;return o&&Object.entries(o).forEach(([p,w])=>n=n.set(p,w)),this.http.get(`${this.base}${e}`,{params:n})}post(e,o){return this.http.post(`${this.base}${e}`,o)}static{this.\u0275fac=function(o){return new(o||t)(T(B))}}static{this.\u0275prov=E({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function nt(t,d){if(t&1){let e=P();r(0,"button",10),x("click",function(){let n=b(e).$implicit,p=s(2);return h(p.setFilter(n.slug))}),c(1),i()}if(t&2){let e=d.$implicit,o=s(2);C("active",o.activeFilter()===e.slug),a(),M(" ",e.name," ")}}function ot(t,d){if(t&1){let e=P();r(0,"div",9)(1,"button",10),x("click",function(){b(e);let n=s();return h(n.setFilter("todos"))}),c(2," Todos "),i(),f(3,nt,2,3,"button",11),i()}if(t&2){let e=s();a(),C("active",e.activeFilter()==="todos"),a(2),l("ngForOf",e.categories())}}function rt(t,d){t&1&&(r(0,"div",12),m(1,"app-loading-spinner"),i())}function it(t,d){if(t&1){let e=P();r(0,"div",13)(1,"p"),c(2),i(),r(3,"button",14),x("click",function(){b(e);let n=s();return h(n.ngOnInit())}),c(4,"Reintentar"),i()()}if(t&2){let e=s();a(2),g(e.error())}}function at(t,d){if(t&1&&m(0,"app-product-card",18),t&2){let e=d.$implicit;l("product",e)}}function ct(t,d){t&1&&(r(0,"div",19)(1,"p"),c(2,"No hay productos en esta categor\xEDa."),i()())}function lt(t,d){if(t&1&&(r(0,"div",15),f(1,at,1,1,"app-product-card",16)(2,ct,3,0,"div",17),i()),t&2){let e=s();a(),l("ngForOf",e.filtered())("ngForTrackBy",e.trackById),a(),l("ngIf",e.filtered().length===0)}}var It=(()=>{class t{constructor(e){this.api=e,this.products=_([]),this.loading=_(!0),this.error=_(null),this.activeFilter=_("todos"),this.categories=F(()=>{let o=this.products().flatMap(p=>p.categories??[]),n=new Map(o.map(p=>[p.id,p]));return Array.from(n.values())}),this.filtered=F(()=>{let o=this.activeFilter();return o==="todos"?this.products():this.products().filter(n=>n.categories?.some(p=>p.slug===o))})}ngOnInit(){this.loadProducts()}loadProducts(){this.loading.set(!0),this.error.set(null),this.api.get("/products").subscribe({next:e=>{this.products.set(e),this.loading.set(!1)},error:()=>{this.error.set("No se pudieron cargar los productos."),this.loading.set(!1)}})}setFilter(e){this.activeFilter.set(e)}trackById(e,o){return o.id}static{this.\u0275fac=function(o){return new(o||t)(y(G))}}static{this.\u0275cmp=u({type:t,selectors:[["app-catalog"]],standalone:!0,features:[v],decls:15,vars:4,consts:[[1,"catalog-page"],[1,"catalog-header"],[1,"catalog-label"],[1,"catalog-title"],[1,"catalog-subtitle"],["class","catalog-filters",4,"ngIf"],["class","catalog-loading",4,"ngIf"],["class","catalog-error",4,"ngIf"],["class","catalog-grid",4,"ngIf"],[1,"catalog-filters"],[1,"filter-btn",3,"click"],["class","filter-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"catalog-loading"],[1,"catalog-error"],[3,"click"],[1,"catalog-grid"],[3,"product",4,"ngFor","ngForOf","ngForTrackBy"],["class","catalog-empty",4,"ngIf"],[3,"product"],[1,"catalog-empty"]],template:function(o,n){o&1&&(r(0,"section",0)(1,"div",1)(2,"span",2),c(3,"Colecci\xF3n"),i(),r(4,"h1",3),c(5,"Macetas"),m(6,"br"),r(7,"em"),c(8,"Biodegradables"),i()(),r(9,"p",4),c(10," Soluciones sustentables para viveros, floricultura y producci\xF3n agr\xEDcola. "),i()(),f(11,ot,4,3,"div",5)(12,rt,2,0,"div",6)(13,it,5,1,"div",7)(14,lt,3,3,"div",8),i()),o&2&&(a(11),l("ngIf",!n.loading()&&n.categories().length>0),a(),l("ngIf",n.loading()),a(),l("ngIf",n.error()),a(),l("ngIf",!n.loading()&&!n.error()))},dependencies:[O,N,k,I,Y,q],styles:['.catalog-page[_ngcontent-%COMP%]{min-height:100vh;padding:0 0 80px}.catalog-header[_ngcontent-%COMP%]{padding:72px 48px 56px;border-bottom:1px solid var(--color-border);position:relative;overflow:hidden}.catalog-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-60px;right:-60px;width:320px;height:320px;border-radius:50%;background:radial-gradient(circle,var(--color-accent-soft) 0%,transparent 70%);pointer-events:none}.catalog-label[_ngcontent-%COMP%]{display:inline-block;font-family:var(--font-mono);font-size:11px;letter-spacing:.2em;text-transform:uppercase;color:var(--color-accent);margin-bottom:16px;padding:4px 12px;border:1px solid var(--color-accent);border-radius:2px}.catalog-title[_ngcontent-%COMP%]{font-family:var(--font-display);font-size:clamp(48px,7vw,96px);font-weight:800;line-height:.9;color:var(--color-text);margin:0 0 24px;letter-spacing:-.03em}.catalog-title[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-style:italic;color:var(--color-accent)}.catalog-subtitle[_ngcontent-%COMP%]{font-family:var(--font-body);font-size:16px;color:var(--color-text-muted);max-width:420px;line-height:1.6;margin:0}.catalog-filters[_ngcontent-%COMP%]{display:flex;gap:8px;padding:24px 48px;border-bottom:1px solid var(--color-border);flex-wrap:wrap}.filter-btn[_ngcontent-%COMP%]{font-family:var(--font-mono);font-size:12px;letter-spacing:.1em;text-transform:uppercase;padding:8px 20px;border:1px solid var(--color-border);background:transparent;color:var(--color-text-muted);cursor:pointer;border-radius:2px;transition:all .2s ease}.filter-btn[_ngcontent-%COMP%]:hover{border-color:var(--color-accent);color:var(--color-accent)}.filter-btn.active[_ngcontent-%COMP%]{background:var(--color-accent);border-color:var(--color-accent);color:var(--color-bg)}.catalog-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1px;background:var(--color-border);margin-top:0}.catalog-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px}.catalog-error[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px;padding:80px 48px;text-align:center;color:var(--color-text-muted);font-family:var(--font-body)}.catalog-error[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:var(--font-mono);font-size:12px;letter-spacing:.1em;text-transform:uppercase;padding:10px 24px;background:var(--color-accent);color:var(--color-bg);border:none;cursor:pointer;border-radius:2px}.catalog-empty[_ngcontent-%COMP%]{grid-column:1 / -1;padding:80px;text-align:center;color:var(--color-text-muted);font-family:var(--font-body);background:var(--color-bg)}@media (max-width: 768px){.catalog-header[_ngcontent-%COMP%]{padding:48px 24px 40px}.catalog-filters[_ngcontent-%COMP%]{padding:16px 24px}.catalog-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(240px,1fr))}}@media (max-width: 480px){.catalog-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}']})}}return t})();export{It as CatalogComponent};
