<section class="d-flex min-vh-100 bg-img-2">
  <div class="container">
    <div class="row justify-content-center text-start mt-4 mb-4">
      <div class="col-md-9">
        <h2>Catálogo de Macetas Biodegradables</h2>
      </div>

      <!-- Botón carrito con icono + badge -->
      <div class="col-md-2 mb-3 text-end position-relative">
        <a routerLink="/carrito" class="btn btn-outline-dark position-relative">
          <i class="fa fa-shopping-cart"></i>
          <span *ngIf="cantidadCarrito > 0"
                class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
            {{ cantidadCarrito }}
          </span>
        </a>
      </div>
    </div>

    <div class="row justify-content-center">
      <div class="col-md-11">
        <div class="row justify-content-center">
          <div class="col-md-4 mb-4" *ngFor="let prod of productos">
            <div class="card h-100">
              <!-- Imagen circular y centrada -->
              <img [src]="prod.imagen" [alt]="prod.nombre" [title]="prod.nombre"
                   class="card-img-top rounded-circle mx-auto d-block img-fixed" />

              <div class="card-body">
                <h5 class="card-title">{{ prod.nombre }}</h5>

                <p class="card-text">
                  {{ prod.medidas }} <br>
                  {{ prod.presentacion }} <br>
                  <span class="d-block text-end">
                    {{ fmtUSD(prod.precioUsd) }} | {{ fmtARS(prod.precioUsd * dolarVenta) }}
                  </span>

                  <!-- Botón Detalle (más pequeño) dentro del card-text -->
                  <a class="btn btn-sm btn-outline-dark mt-2" [routerLink]="['/producto', prod.id]">
                    Detalle
                  </a>
                </p>

                <div class="input-group mb-3">
                  <button class="btn btn-outline-secondary" type="button" (click)="decrementar(prod)">-</button>
                  <input type="number" class="form-control text-center no-spin"
                         [(ngModel)]="prod.cantidad"
                         (input)="onCantidadInput(prod)" min="0">
                  <button class="btn btn-outline-secondary" type="button" (click)="incrementar(prod)">+</button>
                </div>

                <button class="btn btn-success w-100" (click)="agregarAlCarrito(prod)">
                  Agregar
                </button>
              </div>
            </div>
          </div> <!-- /col -->
        </div>
      </div>
    </div>
  </div>
</section>
